<%= image_tag "Premier_League_Logo.svg.png" %>
<h1>League Table</h1>

<table>
  <thead>
  <tr>
    <th>Pos |</th>
    <th>Team </th>
    <th>W |</th>
    <th>D |</th>
    <th>L |</th>
    <th>GF |</th>
    <th>GA |</th>
    <th>GD |</th>
    <th>Points</th>
    <th colspan="10"></th>
  </tr>
  </thead>

  <% count = 0 %>
  <% array = Array.new(20){Array.new(9,0)} %>
    <% @result.each do |team| %>
        <% array[count][1] = team.home %>
        <% array[count+1][1] = team.away %>
        <% if team.hg > team.ag %>
        <% array[count][2] =+ 1 %>
        <% array[count+1][4] =+ 1 %>
        <% elsif team.hg == team.ag %>
        <% array[count][3] =+ 1 %>
        <% array[count+1][3] =+ 1 %>
        <% else %>
        <% array[count][4] =+ 1 %>
        <% array[count][2] =+ 1 %>
        <% end %>

        <% array[count][5] = team.hg %>
        <% array[count+1][5] = team.ag %>
        <% array[count][6] = team.ag %>
        <% array[count+1][6] = team.hg %>
        <% array[count][7] = array[count][5] - array[count][6] %>
        <% array[count+1][7] = array[count+1][5] - array[count+1][6] %>
        <% array[count][8] = 3*(array[count][2]) + array[count][3] %>
        <% array[count+1][8] = 3*(array[count+1][2]) + array[count+1][3] %>
        <% count = count + 2 %>
    <% end %>

  <% pos = 1 %>
  <% array.group_by{|a| [ a[1] ] }.to_a %>
  <% array.sort_by!{|k| [ k[8], k[7] ] }.reverse! %>
  <% for i in array %>
  <tbody>
    <tr>
    <td><%= pos %></td>
    <td><%= i[1] %></td>
    <td><%= i[2] %></td>
    <td><%= i[3] %></td>
    <td><%= i[4] %></td>
    <td><%= i[5] %></td>
    <td><%= i[6] %></td>
    <td><%= i[7] %></td>
    <td><%= i[8] %></td>
    </tr>
    <% pos = pos + 1 %>
  <% end %>
  </tbody>
</table>

<%= link_to 'Back', :back %>